{"mappings":"AAAA,SAAS,gBAAgB,CAAC,oBAAoB;IAC1C,MAAM,aAAa,SAAS,cAAc,CAAC;IAC3C,MAAM,gBAAgB,SAAS,cAAc,CAAC;IAC9C,MAAM,eAAe,SAAS,cAAc,CAAC;IAC7C,MAAM,UAAU,SAAS,cAAc,CAAC;IACxC,MAAM,cAAc,SAAS,cAAc,CAAC;IAC5C,MAAM,WAAW,SAAS,cAAc,CAAC;IACzC,MAAM,gBAAgB,SAAS,aAAa,CAAC;IAC7C,MAAM,gBAAgB,SAAS,aAAa,CAAC;IAE7C,IAAI;IAEJ,uBAAuB;IACvB,WAAW,gBAAgB,CAAC,UAAU,SAAS,CAAC;QAC5C,IAAI,EAAE,MAAM,CAAC,KAAK,CAAC,MAAM,EAAE;YACvB,MAAM,OAAO,EAAE,MAAM,CAAC,KAAK,CAAC,EAAE;YAE9B,yBAAyB;YACzB,IAAI,KAAK,IAAI,GAAG,QAAY;gBACxB,MAAM;gBACN;YACJ;YAEA,MAAM,SAAS,IAAI;YACnB,OAAO,MAAM,GAAG,SAAS,KAAK;gBAC1B,cAAc,GAAG,GAAG,MAAM,MAAM,CAAC,MAAM;gBAEvC,oBAAoB;gBACpB,cAAc,SAAS,CAAC,MAAM,CAAC;gBAC/B,cAAc,SAAS,CAAC,GAAG,CAAC;gBAC5B,YAAY,QAAQ,GAAG;gBAEvB,IAAI,SACA,QAAQ,OAAO;gBAGnB,UAAU,IAAI,QAAQ,eAAe;oBACjC,aAAa;oBACb,UAAU;oBACV,cAAc;oBACd,YAAY;oBACZ,QAAQ;gBACZ;YACJ;YACA,OAAO,aAAa,CAAC;QACzB;IACJ;IAEA,sBAAsB;IACtB,QAAQ,gBAAgB,CAAC,SAAS;QAC9B,IAAI,CAAC,SAAS;QAEd,0CAA0C;QAC1C,MAAM,SAAS,QAAQ,gBAAgB,CAAC;YACpC,UAAU;YACV,WAAW;YACX,UAAU;YACV,WAAW;YACX,WAAW;YACX,uBAAuB;YACvB,uBAAuB;QAC3B;QAEA,IAAI,QAAQ;YACR,aAAa,GAAG,GAAG,OAAO,SAAS,CAAC;YACpC,cAAc,SAAS,CAAC,MAAM,CAAC;YAC/B,YAAY,QAAQ,GAAG;QAC3B;IACJ;IAEA,qCAAqC;IACrC,YAAY,gBAAgB,CAAC,SAAS;QAClC,IAAI,CAAC,aAAa,GAAG,IAAI,aAAa,GAAG,KAAK,KAAK;QAEnD,MAAM,OAAO,SAAS,aAAa,CAAC;QACpC,KAAK,QAAQ,GAAG;QAChB,KAAK,IAAI,GAAG,aAAa,GAAG;QAC5B,SAAS,IAAI,CAAC,WAAW,CAAC;QAC1B,KAAK,KAAK;QACV,SAAS,IAAI,CAAC,WAAW,CAAC;IAC9B;IAEA,QAAQ;IACR,SAAS,gBAAgB,CAAC,SAAS;QAC/B,IAAI,SAAS;YACT,QAAQ,KAAK;YACb,cAAc,SAAS,CAAC,GAAG,CAAC;YAC5B,YAAY,QAAQ,GAAG;QAC3B;IACJ;AACJ","sources":["src/script.js"],"sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    const imageInput = document.getElementById('image-input');\r\n    const originalImage = document.getElementById('original-image');\r\n    const croppedImage = document.getElementById('cropped-image');\r\n    const cropBtn = document.getElementById('crop-btn');\r\n    const downloadBtn = document.getElementById('download-btn');\r\n    const resetBtn = document.getElementById('reset-btn');\r\n    const editorSection = document.querySelector('.editor-section');\r\n    const resultSection = document.querySelector('.result-section');\r\n    \r\n    let cropper;\r\n    \r\n    // Загрузка изображения\r\n    imageInput.addEventListener('change', function(e) {\r\n        if (e.target.files.length) {\r\n            const file = e.target.files[0];\r\n            \r\n            // Проверка размера файла\r\n            if (file.size > 300 * 1024) {\r\n                alert('Пожалуйста, выберите изображение размером до 300 КБ');\r\n                return;\r\n            }\r\n            \r\n            const reader = new FileReader();\r\n            reader.onload = function(event) {\r\n                originalImage.src = event.target.result;\r\n                \r\n                // Показать редактор\r\n                editorSection.classList.remove('hidden');\r\n                resultSection.classList.add('hidden');\r\n                downloadBtn.disabled = true;\r\n\r\n                if (cropper) {\r\n                    cropper.destroy();\r\n                }\r\n                \r\n                cropper = new Cropper(originalImage, {\r\n                    aspectRatio: NaN,\r\n                    viewMode: 1,\r\n                    autoCropArea: 0.8,\r\n                    responsive: true,\r\n                    guides: true\r\n                });\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    });\r\n    \r\n    // Обрезка изображения\r\n    cropBtn.addEventListener('click', function() {\r\n        if (!cropper) return;\r\n        \r\n        // Обрезанное изображение в формате base64\r\n        const canvas = cropper.getCroppedCanvas({\r\n            minWidth: 64,\r\n            minHeight: 64,\r\n            maxWidth: 4096,\r\n            maxHeight: 4096,\r\n            fillColor: '#fff',\r\n            imageSmoothingEnabled: true,\r\n            imageSmoothingQuality: 'high',\r\n        });\r\n        \r\n        if (canvas) {\r\n            croppedImage.src = canvas.toDataURL('image/jpeg');\r\n            resultSection.classList.remove('hidden');\r\n            downloadBtn.disabled = false;\r\n        }\r\n    });\r\n    \r\n    // Скачивание обрезанного изображения\r\n    downloadBtn.addEventListener('click', function() {\r\n        if (!croppedImage.src || croppedImage.src === '#') return;\r\n        \r\n        const link = document.createElement('a');\r\n        link.download = 'cropped-image.jpg';\r\n        link.href = croppedImage.src;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    });\r\n    \r\n    // Сброс\r\n    resetBtn.addEventListener('click', function() {\r\n        if (cropper) {\r\n            cropper.reset();\r\n            resultSection.classList.add('hidden');\r\n            downloadBtn.disabled = true;\r\n        }\r\n    });\r\n});"],"names":[],"version":3,"file":"photo-cropper.44983732.js.map","sourceRoot":"/__parcel_source_root/"}