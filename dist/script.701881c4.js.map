{"version":3,"sources":["script.js"],"names":["document","addEventListener","cropper","imageInput","getElementById","originalImage","croppedImage","cropBtn","downloadBtn","resetBtn","editorSection","querySelector","resultSection","e","target","files","length","file","size","alert","reader","FileReader","onload","event","src","result","classList","remove","add","disabled","destroy","Cropper","aspectRatio","NaN","viewMode","autoCropArea","responsive","guides","readAsDataURL","canvas","getCroppedCanvas","minWidth","minHeight","maxWidth","maxHeight","fillColor","imageSmoothingEnabled","imageSmoothingQuality","toDataURL","link","createElement","download","href","body","appendChild","click","removeChild","reset"],"mappings":";AAAAA,SAASC,iBAAiB,mBAAoB,WAC1C,IASIC,EATEC,EAAaH,SAASI,eAAe,eACrCC,EAAgBL,SAASI,eAAe,kBACxCE,EAAeN,SAASI,eAAe,iBACvCG,EAAUP,SAASI,eAAe,YAClCI,EAAcR,SAASI,eAAe,gBACtCK,EAAWT,SAASI,eAAe,aACnCM,EAAgBV,SAASW,cAAc,mBACvCC,EAAgBZ,SAASW,cAAc,mBAK7CR,EAAWF,iBAAiB,SAAU,SAASY,GAC3C,GAAIA,EAAEC,OAAOC,MAAMC,OAAQ,CACvB,IAAMC,EAAOJ,EAAEC,OAAOC,MAAM,GAG5B,GAAIE,EAAKC,KAAO,OAEZ,YADAC,MAAM,uDAIV,IAAMC,EAAS,IAAIC,WACnBD,EAAOE,OAAS,SAASC,GACrBlB,EAAcmB,IAAMD,EAAMT,OAAOW,OAGjCf,EAAcgB,UAAUC,OAAO,UAC/Bf,EAAcc,UAAUE,IAAI,UAC5BpB,EAAYqB,UAAW,EAEnB3B,GACAA,EAAQ4B,UAGZ5B,EAAU,IAAI6B,QAAQ1B,EAAe,CACjC2B,YAAaC,IACbC,SAAU,EACVC,aAAc,GACdC,YAAY,EACZC,QAAQ,KAGhBjB,EAAOkB,cAAcrB,MAK7BV,EAAQN,iBAAiB,QAAS,WAC9B,GAAKC,EAAL,CAGA,IAAMqC,EAASrC,EAAQsC,iBAAiB,CACpCC,SAAU,GACVC,UAAW,GACXC,SAAU,KACVC,UAAW,KACXC,UAAW,OACXC,uBAAuB,EACvBC,sBAAuB,SAGvBR,IACAjC,EAAakB,IAAMe,EAAOS,UAAU,cACpCpC,EAAcc,UAAUC,OAAO,UAC/BnB,EAAYqB,UAAW,MAK/BrB,EAAYP,iBAAiB,QAAS,WAClC,GAAKK,EAAakB,KAA4B,MAArBlB,EAAakB,IAAtC,CAEA,IAAMyB,EAAOjD,SAASkD,cAAc,KACpCD,EAAKE,SAAW,oBAChBF,EAAKG,KAAO9C,EAAakB,IACzBxB,SAASqD,KAAKC,YAAYL,GAC1BA,EAAKM,QACLvD,SAASqD,KAAKG,YAAYP,MAI9BxC,EAASR,iBAAiB,QAAS,WAC3BC,IACAA,EAAQuD,QACR7C,EAAcc,UAAUE,IAAI,UAC5BpB,EAAYqB,UAAW","file":"script.701881c4.js","sourceRoot":"..\\src","sourcesContent":["document.addEventListener('DOMContentLoaded', function() {\r\n    const imageInput = document.getElementById('image-input');\r\n    const originalImage = document.getElementById('original-image');\r\n    const croppedImage = document.getElementById('cropped-image');\r\n    const cropBtn = document.getElementById('crop-btn');\r\n    const downloadBtn = document.getElementById('download-btn');\r\n    const resetBtn = document.getElementById('reset-btn');\r\n    const editorSection = document.querySelector('.editor-section');\r\n    const resultSection = document.querySelector('.result-section');\r\n    \r\n    let cropper;\r\n    \r\n    // Загрузка изображения\r\n    imageInput.addEventListener('change', function(e) {\r\n        if (e.target.files.length) {\r\n            const file = e.target.files[0];\r\n            \r\n            // Проверка размера файла\r\n            if (file.size > 300 * 1024) {\r\n                alert('Пожалуйста, выберите изображение размером до 300 КБ');\r\n                return;\r\n            }\r\n            \r\n            const reader = new FileReader();\r\n            reader.onload = function(event) {\r\n                originalImage.src = event.target.result;\r\n                \r\n                // Показать редактор\r\n                editorSection.classList.remove('hidden');\r\n                resultSection.classList.add('hidden');\r\n                downloadBtn.disabled = true;\r\n\r\n                if (cropper) {\r\n                    cropper.destroy();\r\n                }\r\n                \r\n                cropper = new Cropper(originalImage, {\r\n                    aspectRatio: NaN,\r\n                    viewMode: 1,\r\n                    autoCropArea: 0.8,\r\n                    responsive: true,\r\n                    guides: true\r\n                });\r\n            };\r\n            reader.readAsDataURL(file);\r\n        }\r\n    });\r\n    \r\n    // Обрезка изображения\r\n    cropBtn.addEventListener('click', function() {\r\n        if (!cropper) return;\r\n        \r\n        // Обрезанное изображение в формате base64\r\n        const canvas = cropper.getCroppedCanvas({\r\n            minWidth: 64,\r\n            minHeight: 64,\r\n            maxWidth: 4096,\r\n            maxHeight: 4096,\r\n            fillColor: '#fff',\r\n            imageSmoothingEnabled: true,\r\n            imageSmoothingQuality: 'high',\r\n        });\r\n        \r\n        if (canvas) {\r\n            croppedImage.src = canvas.toDataURL('image/jpeg');\r\n            resultSection.classList.remove('hidden');\r\n            downloadBtn.disabled = false;\r\n        }\r\n    });\r\n    \r\n    // Скачивание обрезанного изображения\r\n    downloadBtn.addEventListener('click', function() {\r\n        if (!croppedImage.src || croppedImage.src === '#') return;\r\n        \r\n        const link = document.createElement('a');\r\n        link.download = 'cropped-image.jpg';\r\n        link.href = croppedImage.src;\r\n        document.body.appendChild(link);\r\n        link.click();\r\n        document.body.removeChild(link);\r\n    });\r\n    \r\n    // Сброс\r\n    resetBtn.addEventListener('click', function() {\r\n        if (cropper) {\r\n            cropper.reset();\r\n            resultSection.classList.add('hidden');\r\n            downloadBtn.disabled = true;\r\n        }\r\n    });\r\n});"]}